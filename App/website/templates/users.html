<!--extend the base template-->
{% extends "base.html" %} {% block title %}USERS{% endblock %}
{% block content %}
    <div id="selected"></div>
    <body>
    <button id="button0" style = border-radius: 70% type ="submit" class = "btn btn-primary" onClick="buttons(this.id)"></button><br> 
    <button id="button1" style = border-radius: 70% type ="submit" class = "btn btn-primary" onClick="buttons(this.id)"></button><br>
    <button id="button2" style = border-radius: 70% type ="submit" class = "btn btn-primary" onClick="buttons(this.id)"></button><br>
    <button id="button3" style = border-radius: 70% type ="submit" class = "btn btn-primary" onClick="buttons(this.id)"></button><br>
    <button id="button4" style = border-radius: 70% type ="submit" class = "btn btn-primary" onClick="buttons(this.id)"></button><br>
    <div id="users">
    </body>

<!--
  {% for user in users %}
      <div>
          
          <button style = border-radius: 70% type ="submit" class = "btn btn-primary">{{ user.first_name }}</button>  
      </div>
  {% endfor %}
-->
  </div><br>

  <script type="text/javascript">
    //const users = $users
    
    function set() {
        //const mon = data.user
        var users = {{ users|tojson|safe }}//.replace('&#39;', '')
        var length = users.length
        console.log(users)
        console.log(length)
        //users = {{users}}.replace('&#39;'', '');
        //console.log(users)
        for (i = 0; i < 5; i++) {
            if (i<length) {
                document.getElementById(`button${i}`).innerHTML = users[i]
            }
            else{
                document.getElementById(`button${i}`).innerHTML = "Create User"
            }

        }
        //alert(data);
        console.log('here')
    }

    set();
    
    

</script>

<script>
      
            function buttons(clicked) {
                name = document.getElementById(clicked).innerHTML;
                if (name === 'Create User') {
                    window.location.href = "/sign-up" 
                }
                else{
                    index = clicked.slice(-1)
                    console.log(index)
                    //user = User.query.filter_by(first_name=user).first()
                    var emails = {{ emails|tojson|safe }}
                    
                    email = emails[index]
                    console.log(email)
                    window.location.href = "/login" +'#' + email;
                }
            }         
        </script> 

{% endblock %}